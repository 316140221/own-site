<!doctype html>
<html
  lang="{{ site.language }}"
  data-default-lang="{{ site.defaultLanguage }}"
  data-supported-langs="{{ site.languagesCsv }}"
>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>{% if title %}{{ title | decodeEntities }} 路 {% endif %}{{ site.name }}</title>
    <meta name="description" content="{{ description or site.description }}" />
    <meta property="og:site_name" content="{{ site.name }}" />
    {% if site.googleSiteVerification %}
      <meta name="google-site-verification" content="{{ site.googleSiteVerification }}" />
    {% endif %}

    {% if site.url %}
      {% set canonical = (page.url | url) | absoluteUrl(site.url) %}
      <link rel="canonical" href="{{ canonical }}" />
      <meta property="og:url" content="{{ canonical }}" />
    {% endif %}
    <meta property="og:type" content="{{ ogType or 'website' }}" />
    <meta property="og:title" content="{% if title %}{{ title | decodeEntities }} 路 {% endif %}{{ site.name }}" />
    <meta property="og:description" content="{{ description or site.description }}" />

    <link
      rel="alternate"
      type="application/rss+xml"
      title="{{ site.name }} RSS"
      href="{{ (rssPath or '/feed.xml') | url }}"
    />

    <link rel="stylesheet" href="{{ '/assets/style.css' | url }}" />
    <script src="{{ '/assets/app.js' | url }}" defer></script>
    {% if pageScript %}
      <script src="{{ pageScript | url }}" defer></script>
    {% endif %}
    {% include "partials/analytics.njk" %}
  </head>
  <body>
    <header class="site-header">
      <div class="container header-inner">
        <a class="brand" href="{{ '/' | url }}">{{ site.brand or site.name }}</a>
        <button
          class="menu-toggle"
          type="button"
          aria-controls="site-nav"
          aria-expanded="false"
          data-i18n="nav.menu"
        >
          Menu
        </button>
        <nav class="nav" id="site-nav">
          <a href="{{ '/' | url }}" data-i18n="nav.home">Home</a>

          {% if tools and tools.groups %}
            <details class="nav-dropdown">
              <summary data-i18n="nav.tools">Tools</summary>
              <div class="nav-dropdown-menu">
                <a class="nav-dropdown-top" href="{{ '/tools/' | url }}" data-i18n="nav.toolsAll"
                  >All tools</a
                >
                {% for group in tools.groups %}
                  <div class="nav-dropdown-group">
                    <div class="nav-dropdown-title" data-i18n="tools.group.{{ group.id }}">
                      {{ group.label }}
                    </div>
                    {% for t in group.items %}
                      <a href="{{ t.path | url }}" data-i18n="tools.item.{{ t.slug }}.title"
                        >{{ t.label }}</a
                      >
                    {% endfor %}
                  </div>
                {% endfor %}
              </div>
            </details>
          {% endif %}

          {% if categories %}
            <details class="nav-dropdown">
              <summary data-i18n="nav.news">News</summary>
              <div class="nav-dropdown-menu">
                {% for cat in categories %}
                  <a href="{{ ('/category/' + cat.slug + '/') | url }}">{{ cat.label }}</a>
                {% endfor %}
              </div>
            </details>
          {% endif %}

          {% if site.languages and site.languages.length > 1 %}
            <details class="nav-dropdown nav-lang">
              <summary data-i18n="nav.language">Language</summary>
              <div class="nav-dropdown-menu">
                {% for langCode in site.languages %}
                  <button
                    class="nav-lang-btn"
                    type="button"
                    data-set-lang="{{ langCode }}"
                  >
                    {{ site.languageLabels[langCode] or langCode }}
                  </button>
                {% endfor %}
              </div>
            </details>
          {% endif %}

          <a href="{{ '/search/' | url }}" data-i18n="nav.search">Search</a>
        </nav>
      </div>
    </header>

    <main class="container" data-pagefind-body>
      {{ content | safe }}
    </main>

    <footer class="site-footer">
      <div class="container footer-inner">
        <span>Cloud-first utilities 路 RSS stream 路 {{ (buildTime or '') | formatDateTime }}</span>
        <div class="footer-links">
          <a class="footer-link" href="{{ '/about/' | url }}" data-i18n="nav.about">About</a>
        </div>
      </div>
    </footer>
  </body>
</html>
